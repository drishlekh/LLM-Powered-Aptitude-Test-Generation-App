<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Start a New Test</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <style>
        /* Your existing styles from index.html can remain here */
        #difficulty, #difficulty option { color: black !important; background-color: white !important; }
        .toggle-switch { position: relative; display: inline-block; width: 60px; height: 34px; }
        .toggle-switch input { opacity: 0; width: 0; height: 0; }
        .toggle-slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #4B5563; transition: .4s; border-radius: 34px; }
        .toggle-slider:before { position: absolute; content: ""; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .toggle-slider { background-color: #68D391; }
        input:checked + .toggle-slider:before { transform: translateX(26px); }
        .dark body { background-color: #111827; }
        .dark .card { background: rgba(31, 41, 55, 0.8); color: #fff; }
        .dark label, .dark span, .dark select, .dark input { color: #fff !important; }
        select, select option { color: black !important; background-color: white !important; }
        .modern-input { background-color: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); color: inherit !important; }
    </style>
</head>
<body class="min-h-screen bg-gray-900 flex items-center justify-center p-4">
    <div class="w-full max-w-2xl animate__animated animate__fadeIn">
        <div class="card rounded-xl p-8 shadow-2xl">
            <!-- User Status Display -->
            <div class="absolute top-4 right-4 text-right">
                {% if g.user %}
                    <p class="text-sm">Logged in as: <span class="font-semibold text-blue-400">{{ g.user.email }}</span></p>
                    <a href="{{ url_for('user_history') }}" class="text-sm text-yellow-400 hover:underline">View History</a> | 
                    <a href="{{ url_for('logout') }}" class="text-sm text-red-400 hover:underline">Logout</a>
                {% elif g.guest_id %}
                    <p class="text-sm">Mode: <span class="font-semibold text-green-400">Guest</span></p>
                    <a href="{{ url_for('logout') }}" class="text-sm text-red-400 hover:underline">End Session</a>
                {% endif %}
            </div>

            <h1 class="text-3xl font-bold mb-8 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-500">
                Create a New Quiz
            </h1>
            
            <form method="POST" class="space-y-6">
                <!-- Subjects -->
                <div>
                    <label class="block text-lg font-medium mb-3">Subjects</label>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        {% for subject in subjects %}
                        <label class="flex items-center space-x-3 p-3 rounded-lg border border-gray-600 transition-all duration-300 hover:border-blue-500">
                            <input type="checkbox" name="subjects" value="{{ subject }}" class="form-checkbox h-5 w-5 bg-gray-700 border-gray-600 text-blue-500 focus:ring-blue-500" checked>
                            <span>{{ subject }}</span>
                        </label>
                        {% endfor %}
                    </div>
                </div>
                
                <!-- Difficulty -->
                <div>
                    <label for="difficulty" class="block text-lg font-medium mb-3">Difficulty</label>
                    <select id="difficulty" name="difficulty" class="w-full px-4 py-3 rounded-lg border modern-input">
                        <option value="Easy">Easy</option>
                        <option value="Medium" selected>Medium</option>
                        <option value="Hard">Hard</option>
                    </select>
                </div>
                
                <!-- Number of Questions -->
                <div>
                    <label for="num_questions" class="block text-lg font-medium mb-3">Number of Questions</label>
                    <input type="number" id="num_questions" name="num_questions" min="1" max="30" class="w-full px-4 py-3 rounded-lg border modern-input" value="5" required>
                </div>
                
                <!-- Timed Test Toggle -->
                <div class="flex items-center justify-between">
                    <span class="text-lg font-medium">Timed Test</span>
                    <label class="toggle-switch">
                        <input type="checkbox" name="timed_test">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <!-- Submit Button -->
                <button type="submit" class="w-full py-3 px-6 rounded-lg bg-gradient-to-r from-blue-500 to-purple-500 text-white font-semibold text-lg transition-all duration-300 hover:opacity-90 hover:scale-105">
                    Start Test
                </button>
            </form>
        </div>
    </div>
</body>
</html>